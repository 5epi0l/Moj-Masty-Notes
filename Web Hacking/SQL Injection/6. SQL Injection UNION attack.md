
When An application is vulnerable to SQLi, and the results of the query are returned within the application's responses, you can use the union keyword to retrieve data from other tables within the database


The **UNION** keyword enables you to execute one or more additional **SELECT** queries and append the results to the original query



For example:

```
select p,q FROM table1 UNION select r,s FROM table2

```


This SQL query returns a single result with two columns, containing values from columns p and q in table1 and columns r and s in table2



For a **UNION** query to work, two key requirements must be met:

- The individual queries must return same number of columns
- The data types in each column must be compatible between the individual queries






### Determining the number of columns required


When performing a UNION attack, there are two effective methods to determine how many columns are being returned from the original query


- ORDER BY

```
' ORDER BY 1--
' ORDER BY 2--
' ORDER BY 3--
```


when the specified number exceeds the number of columns being returned, the application will error out. 

Thus, if the applications errors out when ordering the nth column, the required number of columns would be (n-1)





- UNION SELECT

```
'UNION SELECT NULL--
'UNION SELECT NULL,NULL--
'UNION SELECT NULL,NULL,NULL--
```



If the number of NULLs don't match the number of columns, it will return an error. 

We use NULL as the values returned from the injected SELECT query because the datatypes in each column must be compatible between the original and the injected values. NULL is convertible to every common data type, so it maximizes the chance that a payload will succeed when the column count is correct




### Database Specific Syntax


On Oracle, every **SELECT** query must use the **FROM** keyword and specify a valid table.